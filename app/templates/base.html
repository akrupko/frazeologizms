<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <title>{% block title %}{{ category.seo.title if category and category.seo and category.seo.title else '–¢—Ä–µ–Ω–∞–∂–µ—Ä —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º–æ–≤ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ - –∏–∑—É—á–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω' }}{% endblock %}</title>
    <meta name="description" content="{% block description %}{{ category.seo.description if category and category.seo and category.seo.description else '–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º–æ–≤ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ì–≠ –∏ –û–ì–≠ –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É. –û–Ω–ª–∞–π–Ω —Ç–µ—Å—Ç—ã —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è.' }}{% endblock %}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header Ad Placeholder -->
    <div class="ad-placeholder ad-header" data-ad-slot="header">
        <!-- Ad: Header Banner (Leaderboard 728x90 or 970x90) -->
        <span class="ad-label">–†–µ–∫–ª–∞–º–∞</span>
    </div>

    <!-- Navigation Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>üìö –¢–µ–º—ã —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º–æ–≤</h3>
            <button class="sidebar-close" id="sidebar-close">&times;</button>
        </div>
        <div class="sidebar-content">
            {% if categories %}
                {% for cat in categories %}
                <a href="{{ cat.url }}" class="nav-link{% if category and category.slug == cat.slug %} active{% endif %}"
                   data-category="{{ cat.slug }}"
                   title="{{ cat.title }}">
                    {{ cat.icon }} {{ cat.display_name }}
                    {% if cat.count %}<span class="category-count">({{ cat.count }})</span>{% endif %}
                </a>
                {% endfor %}
            {% endif %}
            <div class="sidebar-footer">
                <small>üéì –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ì–≠ –∏ –û–ì–≠</small>
            </div>

            <!-- Sidebar Ad Placeholder -->
            <div class="ad-placeholder ad-sidebar" data-ad-slot="sidebar">
                <!-- Ad: Sidebar (Medium Rectangle 300x250) -->
                <span class="ad-label">–†–µ–∫–ª–∞–º–∞</span>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobile-menu-btn">
        <span></span>
        <span></span>
        <span></span>
    </button>
    
    <!-- Main Content -->
    <div class="main-content" id="main-content">
        <div class="container">
            <!-- Header -->
            <header>
                <h1 id="page-title">{{ category.header.title if category and category.header and category.header.title else 'üè† –¢—Ä–µ–Ω–∞–∂–µ—Ä —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º–æ–≤' }}</h1>
                <p id="page-description">{{ category.header.description if category and category.header and category.header.description else '–ò–∑—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º–æ–≤ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –ø–æ —Ä–∞–∑–Ω—ã–º —Ç–µ–º–∞–º' }}</p>
            </header>

            <!-- Search Widget -->
            <div class="search-widget">
                <form id="search-form" action="{{ url_for('web.search') }}" method="get">
                    <div class="search-input-wrapper">
                        <input type="search" 
                               id="search-input" 
                               name="q" 
                               placeholder="–ü–æ–∏—Å–∫ —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º–∞..." 
                               autocomplete="off"
                               minlength="2">
                        <button type="submit" class="search-button" aria-label="–ü–æ–∏—Å–∫">
                            üîç
                        </button>
                    </div>
                    <div id="search-results" class="search-results" style="display: none;"></div>
                </form>
                <div class="search-alternatives">
                    <a href="{{ url_for('web.search_text') }}" class="text-search-link">
                        üìù –ü–æ–∏—Å–∫ –≤ —Ç–µ–∫—Å—Ç–µ
                    </a>
                </div>
            </div>

            <!-- Page-specific content -->
            {% block content %}{% endblock %}

            <!-- Content Area Ad Placeholder -->
            <div class="ad-placeholder ad-content" data-ad-slot="content">
                <!-- Ad: In-Content (Large Rectangle 336x280 or 300x250) -->
                <span class="ad-label">–†–µ–∫–ª–∞–º–∞</span>
            </div>

            <!-- Footer -->
            <footer>
                <p id="footer-text">{{ category.footer_text if category and category.footer_text else 'üìö –¢—Ä–µ–Ω–∞–∂–µ—Ä —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º–æ–≤ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞' }}</p>
            </footer>

            <!-- SEO Content Section -->
            {% if category and category.seo %}
            <section class="seo-content">
                <div class="seo-text">
                    <h2 id="seo-title">{{ category.seo.title }}</h2>
                    
                    <p id="seo-description">{{ category.seo.description }}</p>
                    
                    <h3 id="seo-features-title">{{ category.seo.features_title }}</h3>
                    <p id="seo-features-text">{{ category.seo.features_text }}</p>
                    
                    <ul class="seo-list">
                        <li>üéØ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –∑–∞–¥–∞–Ω–∏—è–º –ï–ì–≠ –∏ –û–ì–≠ –ø–æ —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∏</li>
                        <li>üìñ –ò–∑—É—á–∏—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∏ —ç—Ç–∏–º–æ–ª–æ–≥–∏—é —Ñ—Ä–∞–∑–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –µ–¥–∏–Ω–∏—Ü</li>
                        <li>üí° –ó–∞–ø–æ–º–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä—É—Å—Å–∫–∏—Ö –∏–¥–∏–æ–º</li>
                        <li>üèÜ –£—Å–ø–µ—à–Ω–æ –≤—ã—Å—Ç—É–ø–∏—Ç—å –Ω–∞ –æ–ª–∏–º–ø–∏–∞–¥–∞—Ö –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É</li>
                        <li>üìù –£–ª—É—á—à–∏—Ç—å –ø–∏—Å—å–º–µ–Ω–Ω—É—é –∏ —É—Å—Ç–Ω—É—é —Ä–µ—á—å</li>
                    </ul>
                    
                    <p class="seo-footer" id="seo-footer">{{ category.seo.footer }}</p>
                </div>
            </section>
            {% endif %}
        </div>
    </div>

    <!-- Load scripts -->
    <script>
        window.API_BASE_URL = "{{ url_for('api.get_phrases') }}".replace('/phrases', '');
        // Expose category data for JS trainer
        {% if category %}
        window.CURRENT_CATEGORY = "{{ category.key }}";
        window.CATEGORY_NAME = "{{ category.display_name }}";
        window.CATEGORY_SLUG = "{{ category.slug }}";
        {% endif %}
    </script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script src="{{ url_for('static', filename='navigation.js') }}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
